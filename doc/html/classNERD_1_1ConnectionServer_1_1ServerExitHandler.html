<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Network Rerouter Daemon (nerd): NERD::ConnectionServer::ServerExitHandler Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Rerouter Daemon (nerd)
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceNERD.html">NERD</a>      </li>
      <li class="navelem"><a class="el" href="classNERD_1_1ConnectionServer.html">ConnectionServer</a>      </li>
      <li class="navelem"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html">ServerExitHandler</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">NERD::ConnectionServer::ServerExitHandler Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="NERD::ConnectionServer::ServerExitHandler" -->
<p>Functor to handle SIGCHLD signals received through <a class="el" href="classLibWheel_1_1SignalQueue.html" title="A system for synchronously handling asynchronous signals in a uni-threaded process.">LibWheel::SignalQueue</a>.  
 <a href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#details">More...</a></p>

<p><a href="classNERD_1_1ConnectionServer_1_1ServerExitHandler-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#a0a3634beb4eac3315afb6671205c399a">ServerExitHandler</a> (<a class="el" href="classNERD_1_1ConnectionServer.html#ac838d247f33cef856ae722343a8cb7ff">PendingConnectionList</a> &amp;pcl, <a class="el" href="classNERD_1_1ConnectionServer.html#a1f7b6abdda0f0a7a027a5f2e24727cee">RedirectionTable</a> &amp;rt, <a class="el" href="classNERD_1_1ConnectionServer.html#a0cd661f2a6755c501ac198229675ad4d">ServerTable</a> &amp;st, <a class="el" href="classNERD_1_1ConnectionServer.html#a63d211040487b4566f2f696026723932">TimeoutList</a> &amp;tl, bool v)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html" title="Functor to handle SIGCHLD signals received through LibWheel::SignalQueue.">ServerExitHandler</a>.  <a href="#a0a3634beb4eac3315afb6671205c399a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#a9ca943b524de0b1f1907cecaab2943e1">operator()</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Call operator for <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html" title="Functor to handle SIGCHLD signals received through LibWheel::SignalQueue.">ServerExitHandler</a>.  <a href="#a9ca943b524de0b1f1907cecaab2943e1"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLibWheel_1_1WaitList.html#a197f2582847b549a89b833d2eb153b1c">PendingConnectionList::iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#ac380cd94aeac14ce16c7d957d999941c">findPendingConnection</a> (pid_t pid)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up a pending connection given the PID of its server.  <a href="#ac380cd94aeac14ce16c7d957d999941c"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNERD_1_1ConnectionServer.html#ac838d247f33cef856ae722343a8cb7ff">PendingConnectionList</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#a0953476221ba91597772e457b7357eae">pendingConnections</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A reference to the containing ConnectionServer's list of pending connections.  <a href="#a0953476221ba91597772e457b7357eae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNERD_1_1ConnectionServer.html#a1f7b6abdda0f0a7a027a5f2e24727cee">RedirectionTable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#af4572dea480ca71da58a92ce88b8153e">redirections</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A reference to the containing ConnectionServer's table of redirection rules.  <a href="#af4572dea480ca71da58a92ce88b8153e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNERD_1_1ConnectionServer.html#a0cd661f2a6755c501ac198229675ad4d">ServerTable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#a9155fa7acc10d3e954d5998624c80bd7">servers</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A reference to the containing ConnectionServer's look-up table of active servers.  <a href="#a9155fa7acc10d3e954d5998624c80bd7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classNERD_1_1ConnectionServer.html#a63d211040487b4566f2f696026723932">TimeoutList</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#ac95b8019ae4312f278e28808e92b77a1">timeoutList</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A reference to the containing ConnectionServer's list of redirection rules awaiting removal.  <a href="#ac95b8019ae4312f278e28808e92b77a1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#ac25e75d9b69963b6c0624099b8d6ec15">verbose</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><b>true</b> to log extra messages; <b>false</b> otherwise.  <a href="#ac25e75d9b69963b6c0624099b8d6ec15"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Functor to handle SIGCHLD signals received through <a class="el" href="classLibWheel_1_1SignalQueue.html" title="A system for synchronously handling asynchronous signals in a uni-threaded process.">LibWheel::SignalQueue</a>. </p>
<p>Performs appropriate actions when a child process exits; see <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#a9ca943b524de0b1f1907cecaab2943e1" title="Call operator for ServerExitHandler.">operator()()</a> for details. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0a3634beb4eac3315afb6671205c399a"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::ServerExitHandler" ref="a0a3634beb4eac3315afb6671205c399a" args="(PendingConnectionList &amp;pcl, RedirectionTable &amp;rt, ServerTable &amp;st, TimeoutList &amp;tl, bool v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NERD::ConnectionServer::ServerExitHandler::ServerExitHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classNERD_1_1ConnectionServer.html#ac838d247f33cef856ae722343a8cb7ff">PendingConnectionList</a> &amp;&#160;</td>
          <td class="paramname"><em>pcl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNERD_1_1ConnectionServer.html#a1f7b6abdda0f0a7a027a5f2e24727cee">RedirectionTable</a> &amp;&#160;</td>
          <td class="paramname"><em>rt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNERD_1_1ConnectionServer.html#a0cd661f2a6755c501ac198229675ad4d">ServerTable</a> &amp;&#160;</td>
          <td class="paramname"><em>st</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classNERD_1_1ConnectionServer.html#a63d211040487b4566f2f696026723932">TimeoutList</a> &amp;&#160;</td>
          <td class="paramname"><em>tl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>v</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor for <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html" title="Functor to handle SIGCHLD signals received through LibWheel::SignalQueue.">ServerExitHandler</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pcl</td><td>A reference to the containing ConnectionServer's list of pending connections. </td></tr>
    <tr><td class="paramname">rt</td><td>A reference to the containing ConnectionServer's look-up table of redirection rules. </td></tr>
    <tr><td class="paramname">st</td><td>A reference to the containing ConnectionServer's look-up table of active servers. </td></tr>
    <tr><td class="paramname">tl</td><td>A reference to the containing ConnectionServer's list of connections to drop. </td></tr>
    <tr><td class="paramname">v</td><td><b>true</b> to enable verbose logging; <b>false</b> otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00701">701</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac380cd94aeac14ce16c7d957d999941c"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::findPendingConnection" ref="ac380cd94aeac14ce16c7d957d999941c" args="(pid_t pid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLibWheel_1_1WaitList.html#a197f2582847b549a89b833d2eb153b1c">ConnectionServer::PendingConnectionList::iterator</a> NERD::ConnectionServer::ServerExitHandler::findPendingConnection </td>
          <td>(</td>
          <td class="paramtype">pid_t&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Look up a pending connection given the PID of its server. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>The process ID of a server. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An iterator into the pending connections list if a patching element is found, or to just past the end of the list if none is found. </dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>This is an O(n) operation in the number of pending connections. </dd></dl>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00791">791</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

<p>References <a class="el" href="nerd_8cpp_source.html#l00282">NERD::ConnectionServer::pendingConnections</a>, <a class="el" href="WaitList__impl_8cpp_source.html#l00065">LibWheel::WaitList::begin()</a>, and <a class="el" href="WaitList__impl_8cpp_source.html#l00090">LibWheel::WaitList::end()</a>.</p>

</div>
</div>
<a class="anchor" id="a9ca943b524de0b1f1907cecaab2943e1"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::operator()" ref="a9ca943b524de0b1f1907cecaab2943e1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void NERD::ConnectionServer::ServerExitHandler::operator() </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Call operator for <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html" title="Functor to handle SIGCHLD signals received through LibWheel::SignalQueue.">ServerExitHandler</a>. </p>
<p>For each child process that has exited, retrieve the PID and exit status. If the child was associated with an active connection, remove its associated redirection rules, and remove it from the active connections table. Otherwise, if the child was associated with a pending connection, remove it from the pending connections list.</p>
<p>Redirection rules for servers that have exited are added to <code>timeoutList</code>; they will be deleted <code>NERD_CONNECTION_TIMEOUT</code> seconds after their server exited. </p>
<dl class="user"><dt><b>Side Effects:</b></dt><dd>May write messages to <a class="el" href="namespaceLibWheel.html#af4ca70f4f65b2948701218436516a679" title="Global logmsg object.">LibWheel::logmsg</a>. </dd></dl>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00719">719</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

<p>References <a class="el" href="Logmsg_8hpp_source.html#l00047">LibWheel::logmsg</a>, <a class="el" href="logmsg_8h_source.html#l00072">logmsg_err</a>, <a class="el" href="nerd_8cpp_source.html#l00285">NERD::ConnectionServer::servers</a>, <a class="el" href="nerd_8cpp_source.html#l00282">NERD::ConnectionServer::pendingConnections</a>, <a class="el" href="WaitList__impl_8cpp_source.html#l00090">LibWheel::WaitList::end()</a>, <a class="el" href="logmsg_8h_source.html#l00073">logmsg_warning</a>, <a class="el" href="WaitList__impl_8cpp_source.html#l00128">LibWheel::WaitList::erase()</a>, <a class="el" href="nerd_8cpp_source.html#l00281">NERD::ConnectionServer::verbose</a>, <a class="el" href="logmsg_8h_source.html#l00074">logmsg_notice</a>, <a class="el" href="nerd_8cpp_source.html#l00283">NERD::ConnectionServer::redirections</a>, <a class="el" href="nerd_8cpp_source.html#l00284">NERD::ConnectionServer::timeoutList</a>, and <a class="el" href="WaitList__impl_8cpp_source.html#l00115">LibWheel::WaitList::add()</a>.</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a0953476221ba91597772e457b7357eae"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::pendingConnections" ref="a0953476221ba91597772e457b7357eae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNERD_1_1ConnectionServer.html#ac838d247f33cef856ae722343a8cb7ff">PendingConnectionList</a>&amp; <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#a0953476221ba91597772e457b7357eae">NERD::ConnectionServer::ServerExitHandler::pendingConnections</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A reference to the containing ConnectionServer's list of pending connections. </p>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00244">244</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af4572dea480ca71da58a92ce88b8153e"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::redirections" ref="af4572dea480ca71da58a92ce88b8153e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNERD_1_1ConnectionServer.html#a1f7b6abdda0f0a7a027a5f2e24727cee">RedirectionTable</a>&amp; <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#af4572dea480ca71da58a92ce88b8153e">NERD::ConnectionServer::ServerExitHandler::redirections</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A reference to the containing ConnectionServer's table of redirection rules. </p>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00245">245</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9155fa7acc10d3e954d5998624c80bd7"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::servers" ref="a9155fa7acc10d3e954d5998624c80bd7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNERD_1_1ConnectionServer.html#a0cd661f2a6755c501ac198229675ad4d">ServerTable</a>&amp; <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#a9155fa7acc10d3e954d5998624c80bd7">NERD::ConnectionServer::ServerExitHandler::servers</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A reference to the containing ConnectionServer's look-up table of active servers. </p>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00246">246</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac95b8019ae4312f278e28808e92b77a1"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::timeoutList" ref="ac95b8019ae4312f278e28808e92b77a1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classNERD_1_1ConnectionServer.html#a63d211040487b4566f2f696026723932">TimeoutList</a>&amp; <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#ac95b8019ae4312f278e28808e92b77a1">NERD::ConnectionServer::ServerExitHandler::timeoutList</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A reference to the containing ConnectionServer's list of redirection rules awaiting removal. </p>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00247">247</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac25e75d9b69963b6c0624099b8d6ec15"></a><!-- doxytag: member="NERD::ConnectionServer::ServerExitHandler::verbose" ref="ac25e75d9b69963b6c0624099b8d6ec15" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classNERD_1_1ConnectionServer_1_1ServerExitHandler.html#ac25e75d9b69963b6c0624099b8d6ec15">NERD::ConnectionServer::ServerExitHandler::verbose</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><b>true</b> to log extra messages; <b>false</b> otherwise. </p>

<p>Definition at line <a class="el" href="nerd_8cpp_source.html#l00248">248</a> of file <a class="el" href="nerd_8cpp_source.html">nerd.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="nerd_8cpp_source.html">nerd.cpp</a></li>
</ul>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 28 2012 13:00:09 for Network Rerouter Daemon (nerd) by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5
</small></address>

</body>
</html>
